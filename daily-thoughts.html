<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Thoughts</title>
  <link rel="stylesheet" href="daily-thoughts.css">
  <script type="module" src="daily-thoughts.js" defer></script>
</head>
<body>
  <div class="background-blur"></div>
  <h1 class="page-title">ğŸŒ¤ï¸ Her Daily Thoughts</h1>

  <div class="thoughts-container">

    <!-- Mood Section -->
    <div class="thought-card">
      <h2>Current Mood</h2>
      <div class="emoji-picker">
        <input type="text" id="moodInput" placeholder="ğŸ˜„ or describe your mood..." />
      </div>
    </div>

    <!-- Highlight -->
    <div class="thought-card">
      <h2>Todayâ€™s Highlight</h2>
      <textarea id="highlightInput" placeholder="What made her smile today?"></textarea>
    </div>

    <!-- Let Go -->
    <div class="thought-card">
      <h2>Letting Go</h2>
      <textarea id="letgoInput" placeholder="What can she release today?"></textarea>
    </div>

    <!-- Todayâ€™s Thought -->
    <div class="thought-card">
      <h2>Todayâ€™s Thought</h2>
      <textarea id="thoughtInput" placeholder="A passing or powerful thought..."></textarea>
    </div>

    <!-- Appreciation -->
    <div class="thought-card">
      <h2>Gratitude</h2>
      <textarea id="appreciateInput" placeholder="Something she truly appreciated..."></textarea>
    </div>

    <!-- Affirmation -->
    <div class="thought-card">
      <h2>Daily Affirmation</h2>
      <div class="affirmation-row">
        <textarea id="affirmationInput" placeholder="You are enough. ğŸ’›"></textarea>
        <button id="refreshAffirmation">ğŸ”„</button>
      </div>
    </div>

    <button class="save-btn">ğŸ’¾ Save Today</button>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
    import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCT70w5hwEZqELdgoFYGyAuGqP9AQsAqu4",
      authDomain: "mylaw-c3414.firebaseapp.com",
      databaseURL: "https://mylaw-c3414-default-rtdb.firebaseio.com",
      projectId: "mylaw-c3414",
      storageBucket: "mylaw-c3414.appspot.com",
      messagingSenderId: "449744223319",
      appId: "1:449744223319:web:8eadf59519800edc927712",
      measurementId: "G-L50E12B128"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const saveBtn = document.querySelector('.save-btn');
    saveBtn.addEventListener('click', () => {
      const data = {
        mood: document.getElementById('moodInput').value,
        highlight: document.getElementById('highlightInput').value,
        letgo: document.getElementById('letgoInput').value,
        thought: document.getElementById('thoughtInput').value,
        appreciate: document.getElementById('appreciateInput').value,
        affirmation: document.getElementById('affirmationInput').value
      };
      set(ref(db, 'dailyThoughts'), data)
        .then(() => alert("ğŸ’¾ Saved!"))
        .catch(err => alert("Error saving: " + err));
    });

    // Load existing data
    window.addEventListener('load', () => {
      get(ref(db, 'dailyThoughts')).then(snapshot => {
        if (snapshot.exists()) {
          const data = snapshot.val();
          document.getElementById('moodInput').value = data.mood || '';
          document.getElementById('highlightInput').value = data.highlight || '';
          document.getElementById('letgoInput').value = data.letgo || '';
          document.getElementById('thoughtInput').value = data.thought || '';
          document.getElementById('appreciateInput').value = data.appreciate || '';
          document.getElementById('affirmationInput').value = data.affirmation || '';
        }
      });
    });

    // Affirmation suggestions
    const affirmations = [
      "You are enough ğŸŒ¼",
      "You radiate positive energy ğŸŒˆ",
      "You deserve peace ğŸŒŠ",
      "You are deeply loved ğŸ’–",
      "You can do hard things ğŸ’ª"
    ];

    document.getElementById('refreshAffirmation').addEventListener('click', () => {
      const random = affirmations[Math.floor(Math.random() * affirmations.length)];
      document.getElementById('affirmationInput').value = random;
    });
  </script>
</body>
</html>