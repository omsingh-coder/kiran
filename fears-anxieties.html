<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Her Fears & Anxieties</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, onValue, push, update } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCT70w5hwEZqELdgoFYGyAuGqP9AQsAqu4",
      authDomain: "mylaw-c3414.firebaseapp.com",
      databaseURL: "https://mylaw-c3414-default-rtdb.firebaseio.com",
      projectId: "mylaw-c3414",
      storageBucket: "mylaw-c3414.appspot.com",
      messagingSenderId: "449744223319",
      appId: "1:449744223319:web:8eadf59519800edc927712",
      measurementId: "G-L50E12B128"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const dataRef = ref(db, "herSpace/fearsAnxieties");

    const container = document.getElementById("qa-container");
    const addBtn = document.getElementById("addBtn");

    // Load existing data
    onValue(dataRef, (snapshot) => {
      container.innerHTML = "";
      snapshot.forEach(child => {
        const key = child.key;
        const { question, answer } = child.val();

        const card = document.createElement("div");
        card.className = "qa-card";
        card.innerHTML = `
          <h3 class="question-text">${question}</h3>
          <textarea placeholder="Type her answer..." class="answer">${answer || ""}</textarea>
          <div class="buttons">
            <button class="save-btn">üíæ Save</button>
            <button class="clear-btn">üóëÔ∏è Clear</button>
          </div>
        `;

        // Save answer
        card.querySelector(".save-btn").onclick = () => {
          const newAnswer = card.querySelector(".answer").value.trim();
          update(ref(db, `herSpace/fearsAnxieties/${key}`), { question, answer: newAnswer });
        };

        // Clear only answer
        card.querySelector(".clear-btn").onclick = () => {
          card.querySelector(".answer").value = "";
          update(ref(db, `herSpace/fearsAnxieties/${key}`), { question, answer: "" });
        };

        container.appendChild(card);
      });
    });

    // Add new question
    addBtn.onclick = () => {
      const q = prompt("Type her new fear/anxiety question:");
      if (q) {
        push(dataRef, { question: q, answer: "" });
      }
    };

    // Load default questions if empty
    onValue(dataRef, (snapshot) => {
      if (!snapshot.exists()) {
        const defaultQs = [
          "Her phobias",
          "What she fears in a relationship",
          "What future scares her",
          "How she handles panic",
          "What comforts her when she‚Äôs anxious",
          "Her fear of losing someone",
          "Her biggest fear in life"
        ];
        defaultQs.forEach(q => push(dataRef, { question: q, answer: "" }));
      }
    }, { onlyOnce: true });
  </script>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(145deg, #1e1e2f, #000010);
      color: white;
      overflow-x: hidden;
    }

    h1 {
      text-align: center;
      font-size: 2.2em;
      margin: 30px 10px 20px;
      background: linear-gradient(to right, #ff99c8, #c3b1e1, #8ec5fc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: flicker 2s infinite alternate;
    }

    @keyframes flicker {
      0% {
        text-shadow: 0 0 5px #ff99c8, 0 0 10px #c3b1e1;
      }
      100% {
        text-shadow: 0 0 10px #8ec5fc, 0 0 20px #ff99c8;
      }
    }

    #qa-container {
      max-width: 700px;
      margin: auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .qa-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.08);
      position: relative;
      backdrop-filter: blur(6px);
      transition: transform 0.2s ease;
    }

    .qa-card:hover {
      transform: scale(1.01);
    }

    .question-text {
      font-size: 1.1em;
      margin-bottom: 10px;
      color: #fcd9ff;
      font-weight: 500;
    }

    .answer {
      width: 100%;
      background: #222;
      color: #fff;
      padding: 12px;
      border-radius: 10px;
      border: none;
      font-size: 1em;
      resize: vertical;
      outline: none;
      min-height: 80px;
    }

    .buttons {
      margin-top: 10px;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    .buttons button {
      padding: 6px 14px;
      font-size: 0.9em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      background: linear-gradient(45deg, #ffb5e8, #c9c9ff);
      color: #000;
      transition: all 0.2s ease;
    }

    .buttons button:hover {
      transform: scale(1.05);
    }

    #addBtn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 65px;
      height: 65px;
      background: radial-gradient(circle, #ff9a9e, #fad0c4, #fbc2eb);
      border: none;
      border-radius: 50%;
      color: #000;
      font-size: 36px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 20px #ffc8dd, 0 0 40px #ff99c8;
      animation: glitter 3s infinite ease-in-out;
      z-index: 1000;
    }

    @keyframes glitter {
      0%, 100% {
        box-shadow: 0 0 10px #ff99c8, 0 0 20px #ffcafc;
      }
      50% {
        box-shadow: 0 0 25px #ffc8dd, 0 0 60px #ff99c8;
      }
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 1.6em;
      }
      .answer {
        font-size: 0.95em;
      }
    }
  </style>
</head>

<body>
  <h1>üò≥ Her Fears & Anxieties</h1>
  <div id="qa-container"></div>
  <button id="addBtn">+</button>
</body>
</html>